---
output: 
  github_document:
    fig_height: 4
    fig_width: 8
bibliography: data-raw/references.bib
csl: https://raw.githubusercontent.com/citation-style-language/styles/master/apa.csl
editor_options: 
  chunk_output_type: console
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  dpi = 320,
  fig.align = "center"
)
```

# clinicalsignificance <img src="man/figures/logo.png" width="300" align="right" />

<!-- badges: start -->

```{r,echo=FALSE, results="hide", message=FALSE}
library(badger)
```


```{r,echo = FALSE, results='asis', message=FALSE}
cat(
  badge_cran_release("clinicalsignificance"),
  badge_cran_download("clinicalsignificance", type = "grand-total"),
  badge_codecov("pedscience/clinicalsignificance")
)
```

<!-- badges: end -->



The goal of this package is to provide all necessary tools for analyses of clinical significance in clinical intervention studies. In contrast to *statistical* significance, which assesses if it is probable that there is a treatment effect, *clinical* significance can be used to determine if a treatment effect is of practical use or meaningful for patients.

## Installation
You can install clinicalsignificance from CRAN and the development version from [GitHub](https://www.github.com):

``` r
install.packages("clinicalsignificance")

# Or you install the development version from GitHub:
# install.packages("devtools")
devtools::install_github("pedscience/clinicalsignificance")
```



## Example
Given a tidy dataset, the employed instrument's reliability and descriptives (*M* and *SD*) of the functional population, the clinical significance in a study can be easily assessed.

```{r example}
library(clinicalsignificance)

results <- claus_2020 |>
  clinical_significance(
    id = id, 
    time = time, 
    outcome = bdi, 
    pre = 1, 
    post = 4, 
    reliability = 0.81, 
    m_functional = 8, 
    sd_functional = 8, 
    type = "c"
  )

results
```

You can receive a detailed summary of the analysis by

```{r}
summary(results)
```

or plot the results with

```{r, out.width="80%", fig.height=6, fig.width=6}
plot(results)
```


## Rationale

@Jacobson.1984 criticized, along with other researchers, that the vast majority of research in psychological intervention research is based on statistical significance testing. This procedure comes with two major disadvantages: first, treatment effects are based on groups and lack information on individual participants. Second, a significance test lacks practical relevance. One can think of a hypothetical intervention that expands life expectancy by 1 day. With enough participants incorporated in a significance test, one can virtually guarantee a significant result although most would agree that such an intervention lacks practical relevance.

Therefore, @Jacobson.1984 postulated an additional procedure that categorizes each patient based on his/her individual change. If a patient (reliably) moves from the dysfunctional to a functional population, this patient's change is **clinically significant**. This case is depicted in the figure below. 

Let's suppose an instrument assessing depressive symptoms. A clinical population of patients with a major depression may score on average with _M_ = 34 and an _SD_ = 8 on this instrument. A functional population (in this case a sample of people without a major depression) may score on average with _M_ = 8 and an _SD_ = 8 on that same instrument. If now an individual patient with major depression scores 32 on the depression instrument before and intervention (black point in the clinical population) and 12 after an intervention (black point in the functional population) and therefore has crossed the cutoff between the two populations (the black line in between), then this patient has changed clinically significant (if that change is beyond the error of measurement of the instrument).

```{r, echo=FALSE}
library(ggplot2)

cutoff <- clinicalsignificance:::.calc_cutoff_jt(34, 8, 8, 8, type = "c")$value

ggplot() +
  geom_function(fun = dnorm, args = list(mean = 8, sd = 8), aes(color = "Functional"), n = 200) +
  geom_function(fun = dnorm, args = list(mean = 34, sd = 8), aes(color = "Clinical"), n = 200) +
  geom_vline(xintercept = cutoff) +
  geom_point(aes(x = 32, y = 0.025)) +
  geom_point(aes(x = 12, y = 0.025)) +
  geom_curve(aes(x = 32, xend = 12, y = 0.025, yend = 0.025), arrow = arrow(length = unit(0.5, "lines"), type = "closed"), color = "grey20") +
  expand_limits(x = c(-20, 60)) +
  labs(x = "Instrument Score", y = NULL, color = "Population") +
  theme(
    panel.background = element_blank(),
    axis.line.x = element_line(color = "grey20"),
    axis.text.y = element_blank(),
    axis.ticks.y = element_blank()
    )

```


## References
